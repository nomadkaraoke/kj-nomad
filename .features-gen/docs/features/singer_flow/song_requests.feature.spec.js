// Generated from: docs/features/singer_flow/song_requests.feature
import { test } from "playwright-bdd";

test.describe('Singer Song Request Flow', () => {

  test.beforeEach('Background', async ({ Given, And }) => {
    await Given('the KJ is running an online session with ID "1234"'); 
    await And('the session allows requests from the local library and YouTube'); 
  });
  
  test('Singer joins a session and requests a song from the local library', { tag: ['@singer-flow', '@online'] }, async ({ Given, When, And, Then }) => { 
    await Given('a singer navigates to sing.nomadkaraoke.com'); 
    await When('the singer enters the session ID "1234"'); 
    await And('searches for the song "Bohemian Rhapsody"'); 
    await And('selects it from the search results'); 
    await And('enters their name as "Freddie"'); 
    await And('submits the request'); 
    await Then('"Freddie" should be added to the singer queue with "Bohemian Rhapsody"'); 
    await And('the singer\'s phone should show their position in the queue'); 
  });

  test('Singer requests a song from YouTube', { tag: ['@singer-flow', '@online'] }, async ({ Given, When, And, Then }) => { 
    await Given('a singer named "Freddie" is in an online session'); 
    await When('"Freddie" searches for a song that is only on YouTube'); 
    await And('selects the YouTube result'); 
    await And('submits the request'); 
    await Then('the song should be added to the KJ\'s queue'); 
    await And('the singer\'s UI should confirm the request was successful without indicating a download is in progress'); 
  });

  test('Singer manages their personal song queue', { tag: ['@singer-flow', '@online'] }, async ({ Given, When, Then, And }) => { 
    await Given('a singer named "Freddie" has already requested "Don\'t Stop Me Now"'); 
    await When('"Freddie" requests a second song, "Somebody to Love"'); 
    await Then('"Somebody to Love" should be added to Freddie\'s personal queue'); 
    await And('when "Freddie" views their queue'); 
    await Then('they should see both songs listed'); 
    await And('they should have an option to remove "Somebody to Love"'); 
  });

  test('Singer removes a song from their queue', { tag: ['@singer-flow', '@online'] }, async ({ Given, When, Then, And }) => { 
    await Given('a singer named "Freddie" has "Don\'t Stop Me Now" in the main rotation and "Somebody to Love" in their personal queue'); 
    await When('"Freddie" chooses to remove "Somebody to Love" from their queue'); 
    await Then('"Somebody to Love" should be removed from their personal list'); 
    await And('it should not be added to the main rotation'); 
  });

  test('Singer\'s ability to change song is locked when they are next', { tag: ['@singer-flow', '@online'] }, async ({ Given, When, Then }) => { 
    await Given('a singer named "Freddie" is next up in the rotation with the song "Bohemian Rhapsody"'); 
    await When('"Freddie" views their queue on their phone'); 
    await Then('the option to change or remove "Bohemian Rhapsody" should be disabled'); 
  });

});

// == technical section ==

test.use({
  $test: ({}, use) => use(test),
  $uri: ({}, use) => use('docs/features/singer_flow/song_requests.feature'),
  $bddFileData: ({}, use) => use(bddFileData),
});

const bddFileData = [ // bdd-data-start
  {"pwTestLine":11,"pickleLine":11,"tags":["@singer-flow","@online"],"steps":[{"pwStepLine":7,"gherkinStepLine":8,"keywordType":"Context","textWithKeyword":"Given the KJ is running an online session with ID \"1234\"","isBg":true,"stepMatchArguments":[{"group":{"start":44,"value":"\"1234\"","children":[{"start":45,"value":"1234","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":8,"gherkinStepLine":9,"keywordType":"Context","textWithKeyword":"And the session allows requests from the local library and YouTube","isBg":true,"stepMatchArguments":[]},{"pwStepLine":12,"gherkinStepLine":12,"keywordType":"Context","textWithKeyword":"Given a singer navigates to sing.nomadkaraoke.com","stepMatchArguments":[]},{"pwStepLine":13,"gherkinStepLine":13,"keywordType":"Action","textWithKeyword":"When the singer enters the session ID \"1234\"","stepMatchArguments":[{"group":{"start":33,"value":"\"1234\"","children":[{"start":34,"value":"1234","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":14,"gherkinStepLine":14,"keywordType":"Action","textWithKeyword":"And searches for the song \"Bohemian Rhapsody\"","stepMatchArguments":[{"group":{"start":22,"value":"\"Bohemian Rhapsody\"","children":[{"start":23,"value":"Bohemian Rhapsody","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":15,"gherkinStepLine":15,"keywordType":"Action","textWithKeyword":"And selects it from the search results","stepMatchArguments":[]},{"pwStepLine":16,"gherkinStepLine":16,"keywordType":"Action","textWithKeyword":"And enters their name as \"Freddie\"","stepMatchArguments":[{"group":{"start":21,"value":"\"Freddie\"","children":[{"start":22,"value":"Freddie","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":17,"gherkinStepLine":17,"keywordType":"Action","textWithKeyword":"And submits the request","stepMatchArguments":[]},{"pwStepLine":18,"gherkinStepLine":18,"keywordType":"Outcome","textWithKeyword":"Then \"Freddie\" should be added to the singer queue with \"Bohemian Rhapsody\"","stepMatchArguments":[{"group":{"start":0,"value":"\"Freddie\"","children":[{"start":1,"value":"Freddie","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"},{"group":{"start":51,"value":"\"Bohemian Rhapsody\"","children":[{"start":52,"value":"Bohemian Rhapsody","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":19,"gherkinStepLine":19,"keywordType":"Outcome","textWithKeyword":"And the singer's phone should show their position in the queue","stepMatchArguments":[]}]},
  {"pwTestLine":22,"pickleLine":21,"tags":["@singer-flow","@online"],"steps":[{"pwStepLine":7,"gherkinStepLine":8,"keywordType":"Context","textWithKeyword":"Given the KJ is running an online session with ID \"1234\"","isBg":true,"stepMatchArguments":[{"group":{"start":44,"value":"\"1234\"","children":[{"start":45,"value":"1234","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":8,"gherkinStepLine":9,"keywordType":"Context","textWithKeyword":"And the session allows requests from the local library and YouTube","isBg":true,"stepMatchArguments":[]},{"pwStepLine":23,"gherkinStepLine":22,"keywordType":"Context","textWithKeyword":"Given a singer named \"Freddie\" is in an online session","stepMatchArguments":[{"group":{"start":15,"value":"\"Freddie\"","children":[{"start":16,"value":"Freddie","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":24,"gherkinStepLine":23,"keywordType":"Action","textWithKeyword":"When \"Freddie\" searches for a song that is only on YouTube","stepMatchArguments":[{"group":{"start":0,"value":"\"Freddie\"","children":[{"start":1,"value":"Freddie","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":25,"gherkinStepLine":24,"keywordType":"Action","textWithKeyword":"And selects the YouTube result","stepMatchArguments":[]},{"pwStepLine":26,"gherkinStepLine":25,"keywordType":"Action","textWithKeyword":"And submits the request","stepMatchArguments":[]},{"pwStepLine":27,"gherkinStepLine":26,"keywordType":"Outcome","textWithKeyword":"Then the song should be added to the KJ's queue","stepMatchArguments":[]},{"pwStepLine":28,"gherkinStepLine":27,"keywordType":"Outcome","textWithKeyword":"And the singer's UI should confirm the request was successful without indicating a download is in progress","stepMatchArguments":[]}]},
  {"pwTestLine":31,"pickleLine":29,"tags":["@singer-flow","@online"],"steps":[{"pwStepLine":7,"gherkinStepLine":8,"keywordType":"Context","textWithKeyword":"Given the KJ is running an online session with ID \"1234\"","isBg":true,"stepMatchArguments":[{"group":{"start":44,"value":"\"1234\"","children":[{"start":45,"value":"1234","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":8,"gherkinStepLine":9,"keywordType":"Context","textWithKeyword":"And the session allows requests from the local library and YouTube","isBg":true,"stepMatchArguments":[]},{"pwStepLine":32,"gherkinStepLine":30,"keywordType":"Context","textWithKeyword":"Given a singer named \"Freddie\" has already requested \"Don't Stop Me Now\"","stepMatchArguments":[{"group":{"start":15,"value":"\"Freddie\"","children":[{"start":16,"value":"Freddie","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"},{"group":{"start":47,"value":"\"Don't Stop Me Now\"","children":[{"start":48,"value":"Don't Stop Me Now","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":33,"gherkinStepLine":31,"keywordType":"Action","textWithKeyword":"When \"Freddie\" requests a second song, \"Somebody to Love\"","stepMatchArguments":[{"group":{"start":0,"value":"\"Freddie\"","children":[{"start":1,"value":"Freddie","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"},{"group":{"start":34,"value":"\"Somebody to Love\"","children":[{"start":35,"value":"Somebody to Love","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":34,"gherkinStepLine":32,"keywordType":"Outcome","textWithKeyword":"Then \"Somebody to Love\" should be added to Freddie's personal queue","stepMatchArguments":[{"group":{"start":0,"value":"\"Somebody to Love\"","children":[{"start":1,"value":"Somebody to Love","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":35,"gherkinStepLine":33,"keywordType":"Outcome","textWithKeyword":"And when \"Freddie\" views their queue","stepMatchArguments":[{"group":{"start":5,"value":"\"Freddie\"","children":[{"start":6,"value":"Freddie","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":36,"gherkinStepLine":34,"keywordType":"Outcome","textWithKeyword":"Then they should see both songs listed","stepMatchArguments":[]},{"pwStepLine":37,"gherkinStepLine":35,"keywordType":"Outcome","textWithKeyword":"And they should have an option to remove \"Somebody to Love\"","stepMatchArguments":[{"group":{"start":37,"value":"\"Somebody to Love\"","children":[{"start":38,"value":"Somebody to Love","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]}]},
  {"pwTestLine":40,"pickleLine":37,"tags":["@singer-flow","@online"],"steps":[{"pwStepLine":7,"gherkinStepLine":8,"keywordType":"Context","textWithKeyword":"Given the KJ is running an online session with ID \"1234\"","isBg":true,"stepMatchArguments":[{"group":{"start":44,"value":"\"1234\"","children":[{"start":45,"value":"1234","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":8,"gherkinStepLine":9,"keywordType":"Context","textWithKeyword":"And the session allows requests from the local library and YouTube","isBg":true,"stepMatchArguments":[]},{"pwStepLine":41,"gherkinStepLine":38,"keywordType":"Context","textWithKeyword":"Given a singer named \"Freddie\" has \"Don't Stop Me Now\" in the main rotation and \"Somebody to Love\" in their personal queue","stepMatchArguments":[{"group":{"start":15,"value":"\"Freddie\"","children":[{"start":16,"value":"Freddie","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"},{"group":{"start":29,"value":"\"Don't Stop Me Now\"","children":[{"start":30,"value":"Don't Stop Me Now","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"},{"group":{"start":74,"value":"\"Somebody to Love\"","children":[{"start":75,"value":"Somebody to Love","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":42,"gherkinStepLine":39,"keywordType":"Action","textWithKeyword":"When \"Freddie\" chooses to remove \"Somebody to Love\" from their queue","stepMatchArguments":[{"group":{"start":0,"value":"\"Freddie\"","children":[{"start":1,"value":"Freddie","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"},{"group":{"start":28,"value":"\"Somebody to Love\"","children":[{"start":29,"value":"Somebody to Love","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":43,"gherkinStepLine":40,"keywordType":"Outcome","textWithKeyword":"Then \"Somebody to Love\" should be removed from their personal list","stepMatchArguments":[{"group":{"start":0,"value":"\"Somebody to Love\"","children":[{"start":1,"value":"Somebody to Love","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":44,"gherkinStepLine":41,"keywordType":"Outcome","textWithKeyword":"And it should not be added to the main rotation","stepMatchArguments":[]}]},
  {"pwTestLine":47,"pickleLine":43,"tags":["@singer-flow","@online"],"steps":[{"pwStepLine":7,"gherkinStepLine":8,"keywordType":"Context","textWithKeyword":"Given the KJ is running an online session with ID \"1234\"","isBg":true,"stepMatchArguments":[{"group":{"start":44,"value":"\"1234\"","children":[{"start":45,"value":"1234","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":8,"gherkinStepLine":9,"keywordType":"Context","textWithKeyword":"And the session allows requests from the local library and YouTube","isBg":true,"stepMatchArguments":[]},{"pwStepLine":48,"gherkinStepLine":44,"keywordType":"Context","textWithKeyword":"Given a singer named \"Freddie\" is next up in the rotation with the song \"Bohemian Rhapsody\"","stepMatchArguments":[{"group":{"start":15,"value":"\"Freddie\"","children":[{"start":16,"value":"Freddie","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"},{"group":{"start":66,"value":"\"Bohemian Rhapsody\"","children":[{"start":67,"value":"Bohemian Rhapsody","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":49,"gherkinStepLine":45,"keywordType":"Action","textWithKeyword":"When \"Freddie\" views their queue on their phone","stepMatchArguments":[{"group":{"start":0,"value":"\"Freddie\"","children":[{"start":1,"value":"Freddie","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":50,"gherkinStepLine":46,"keywordType":"Outcome","textWithKeyword":"Then the option to change or remove \"Bohemian Rhapsody\" should be disabled","stepMatchArguments":[{"group":{"start":31,"value":"\"Bohemian Rhapsody\"","children":[{"start":32,"value":"Bohemian Rhapsody","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]}]},
]; // bdd-data-end