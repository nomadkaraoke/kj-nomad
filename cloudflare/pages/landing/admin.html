<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Session Live - KJ-Nomad</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Righteous&family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="icon" type="image/svg+xml" href="/favicon.svg">
    <style>
        :root {
            --pink: #ff7acc;
            --blue: #230a89;
            --yellow: #ffdf6b;
            --dark-bg: #0a0a0f;
            --dark-card: #1a1a2e;
            --text-primary: #ffffff;
            --text-secondary: #b0b0c4;
            --gradient-primary: linear-gradient(135deg, var(--pink) 0%, var(--blue) 100%);
        }
        body {
            font-family: 'Inter', sans-serif;
            background: var(--dark-bg);
            color: var(--text-primary);
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 2rem;
        }
        .dashboard {
            background: var(--dark-card);
            border-radius: 20px;
            padding: 3rem;
            max-width: 800px;
            width: 100%;
            border: 2px solid var(--pink);
            text-align: center;
        }
        h1 {
            font-family: 'Righteous', cursive;
            font-size: 3rem;
            background: var(--gradient-primary);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 1rem;
        }
        p {
            color: var(--text-secondary);
            font-size: 1.1rem;
            margin-bottom: 2rem;
        }
        .key-display {
            background: rgba(0,0,0,0.3);
            border-radius: 10px;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
        }
        .key-display h2 {
            font-family: 'Righteous', cursive;
            color: var(--yellow);
            margin-bottom: 0.5rem;
        }
        .key-display code {
            font-size: 1.5rem;
            font-weight: bold;
            word-break: break-all;
            cursor: pointer;
            padding: 0.5rem;
            border-radius: 5px;
            transition: background 0.3s;
        }
        .key-display code:hover {
            background: rgba(255,255,255,0.1);
        }
        .instructions {
            text-align: left;
            margin-top: 2rem;
            padding: 1.5rem;
            border-top: 1px solid rgba(255, 122, 204, 0.2);
        }
        .instructions h3 {
            font-family: 'Righteous', cursive;
            color: var(--pink);
            margin-bottom: 1rem;
        }
        .instructions li {
            margin-bottom: 0.5rem;
        }
        .cta-button {
            display: inline-block;
            padding: 1rem 2rem;
            background: var(--gradient-primary);
            color: white;
            text-decoration: none;
            border-radius: 50px;
            font-weight: 600;
            transition: all 0.3s ease;
            margin-top: 1rem;
        }
        .cta-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(255, 122, 204, 0.3);
        }
    </style>
</head>
<body>
    <div class="dashboard">
        <h1>Your Session is Live!</h1>
        <p>Your online karaoke session has been created. Use the details below to connect your devices.</p>

        <div class="key-display">
            <h2>ðŸ“¢ Session ID (for Singers & Players)</h2>
            <code id="session-id" title="Click to copy">Loading...</code>
        </div>

        <div class="key-display">
            <h2>ðŸ”‘ Admin Key (for your Local Server)</h2>
            <code id="admin-key" title="Click to copy">Loading...</code>
        </div>

        <div class="instructions">
            <h3>Next Steps:</h3>
            <ol>
                <li><strong>Download and run the KJ-Nomad App</strong> if you haven't already.</li>
                <li>In the app, choose "Connect to an Online Session".</li>
                <li>Enter your Session ID and Admin Key when prompted.</li>
                <li>Tell singers to go to <strong>sing.nomadkaraoke.com</strong> and enter the Session ID.</li>
                <li>Point your player screens to <strong>kj.nomadkaraoke.com/player</strong> and enter the Session ID.</li>
            </ol>
            <div style="text-align:center;">
                <a href="#" id="download-link" class="cta-button">Download the App</a>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const sessionDataString = sessionStorage.getItem('kj-nomad-session');
            if (!sessionDataString) {
                document.querySelector('.dashboard').innerHTML = '<h1>Error</h1><p>No session data found. Please <a href="/">create a new session</a>.</p>';
                return;
            }

            const sessionData = JSON.parse(sessionDataString);
            const sessionIdEl = document.getElementById('session-id');
            const adminKeyEl = document.getElementById('admin-key');

            sessionIdEl.textContent = sessionData.sessionId;
            adminKeyEl.textContent = sessionData.adminKey;

            sessionIdEl.addEventListener('click', () => copyToClipboard(sessionData.sessionId, 'Session ID'));
            adminKeyEl.addEventListener('click', () => copyToClipboard(sessionData.adminKey, 'Admin Key'));
            
            // Setup download link
            const downloadLink = document.getElementById('download-link');
            downloadLink.onclick = (e) => {
                e.preventDefault();
                // This reuses the download logic from the main page.
                // In a real app, this might be a shared module.
                showDownloadOptions(); 
            };
        });

        function copyToClipboard(text, type) {
            navigator.clipboard.writeText(text).then(() => {
                alert(`${type} copied to clipboard!`);
            }, (err) => {
                console.error('Failed to copy: ', err);
                alert(`Failed to copy ${type}.`);
            });
        }
        
        // Minimal download logic copied from index.html for demonstration
        function showDownloadOptions() {
            alert('This would open the download modal. For this demo, please return to the homepage to download.');
            // In a full implementation, the download modal logic would be included here or in a shared script.
        }
    </script>
</body>
</html>
